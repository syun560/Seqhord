## SMML Editorユーザマニュアル
## 1. SMEを使ってみる
左側のテキストエディタの記述を解釈（コンパイル）し、音楽を生成できます。
ピアノロールではなく、音列データの記述には、SMMLという特殊な記法を用います。
SMMLは、MML（Music Macro Language）で使用されていたABC記法を簡略化した記法を用います。
MIDIの形式を踏襲し、音データではなく、楽譜データを保存します。

### 1.1. 画面を見てみる
デフォルトで、5つのトラックが用意されており、それぞれのタブに対応しています。
特に「main」タブは、コンダクタートラックという特別なトラックで、
ここに楽曲全体の構造を記述していきます。

### 1.2. 各種命令の記述
「@」に続く特定のキーワードで楽曲情報に関する命令が記述できます。
以下のキーワードが使用できます。
特に指定しなかった場合は、以下に示すデフォルト値となります。

| キーワード | 説明                 | 指定可能値       | デフォルト |
| ---------- | -------------------- | ---------------- | ---------- |
| @bpm       | テンポの指定         | 0～128           | 100        |
| @program   | 楽器の指定           | 0～128           | 0（ピアノ) |
| @volume    | 音量の指定           | 0～128           | 100        |
| @trans     | トランスポーズの指定 | 0～12            | 8          |
| @scale     | スケールの指定       | C, C#, D, ... ,B | C          |
| @title     | 楽曲タイトルの指定   | 任意の文字列     | new_song   |
| @type      | トラックタイプの指定 | ※1.1を参照      | melody     |
| @p         | 小節番号の指定       | 1～128           | 0          |

例) 楽曲全体のテンポを144に設定、楽器をピアノに指定
```
@tempo=144
@program=0
```

### 1.3 音を記述する
- 実際の音は「n」から始まる行に記述していきます。
- 小説の区切りは「|」で表します。
- 音の高さは、現在の調に対応した移動ドである「ドレミファソラシド」が1～8に対応しています。
- オクターブを上げる場合は、「+」を、下げる場合は「-」を手前に記述します。
- 半音上げる場合は、「#」を直後に記述します。

音の長さは、アンダースコア（「_」）の数で指定します。
デフォルトでは、時間単位が8分音符（1小節の八分の一）となっています。
時間間隔を変更する場合は、メタデータで記述します。

例) カエルの歌を記述する
```
n|1_2_3_4_ |3_2_1_. |3_4_5_6_|5_4_3_..|
```

#### ※自動整形（オートフォーマット）について
自動的に適切なスペースが挿入されます。
この機能が不要な場合は、「auto format」のチェックを外すことでオフにすることができます。

### 1.4 コンパイルする
テキストエリアに入力した自動で解釈（コンパイル）され、コンパイルエラーが表示されます。
コンパイルエラーがある場合は、正しく解釈されていないため、修正が必要です。

参考: コンパイルエラー一覧


### 1.5 プレビュー再生する
ピアノロール上部の
「＞」ボタンを押すことで、音をプレビュー再生することができます。
スペースキーを押すことでも再生することができます。

### 1.6 作った曲を保存する
現在の状態で、ローカルもしくは、クラウドに保存することができます。
保存形式としては、テキスト形式、json形式があります。

### 1.7 作った曲をエクスポートする
MIDI形式、MusicXML形式でエクスポートすることができます。

### 1.8 作った曲を読み込む
作った曲を読み込むことができます。

## 2. SMEを使いこなす
ここまでの機能は、基本的な音楽シーケンサと代わりありません。

コードやスケールといった、音楽理論の概念や、
変数や関数といったプログラミングの概念を導入することで、
よりパワフルな作曲体験を得ることができます。

### 2.1 変数について
繰り返しの変数を用いることができます。
よく使われるパターンを変数として定義することで、繰り返しの記述を省略し、より簡潔に記述することができます。
現在使用している変数は、画面右側に表示されます。

コード弾きのストロークです。

#### 変数の定義
変数は以下のように定義することができます。
```
```

#### 変数の使用
変数は以下のように使用することができます。
```
変数です。
```



### 2.2 関数の設定
関数を使用することで、音列に対して操作を行うことができます。
「一オクターブ変更」したり、
スケール内で自由に弾くなどを行うことができます。

デフォルトで用意されている関数は以下の通りです。
| 関数名    | 使用法                         | 説明 |
| --------- | ------------------------------ | ---- |
| rand      | スケール内のランダムな音を出す |      |
| transpose | オクターブ変更する             |      |
|           |                                |      |

### 2.3 コードの指定
コードトラックでは、和音コードを指定ことができます（アノテーション）。
コードを指定することで、伴奏の自動入力などの、機能を利用することができます。

移動ドと考え、相対的な音を入力することができます。

コードは、以下のように記述します。成り立ちます。
C#-----------------------m7-5-----------/分数コード
根音（ルート音）

以下の12音から指定します。
「C, D, E, F, G, A, B」

ルート音に続けて、以下の種類のコードを指定することができます。
構成音はルート音を0としたときの相対表記（半音いくつ分離れているか）です。

| コード | 説明                     | 構成音       |     |
| ------ | ------------------------ | ------------ | --- |
|        | メジャー                 | [0,3,5]      |     |
| m      | マイナー                 | [0,3,5]      |     |
| 7      | セブンス                 | [0, 3, 5, 7] |     |
| M7     | メジャーセブンス         | [0,3,5]      |     |
| Mm7    | メジャーマイナーセブンス |              |     |
| m7     | マイナーセブンス         |              |     |
| dim    | ディミニッシュ           |              |     |
| dim7   | ディミニッシュセブンス   |              |     |
| sus4   | サスフォー               |              |     |
| add9   | アドナインス             |              |     |
| aug    | オーギュメント           |              |     |

「/」を使用することで、分数コードを指定できます。
分数コードを指定することで、最低音が指定した音となります。


### 2.4. トラックの追加
MIDIの仕様に習い、**最大16トラック**までとしています。
トラックは4種類あり、それぞれ用途が分かれています。
追加トラックは「@type」キーワードで、以下の指定が可能です。

| トラックの種類 | 説明             |
| -------------- | ---------------- |
| melody         | メイン           |
| chord          | コードトラック   |
| bass           | ベーストラック   |
| drum           | パーカッション   |

### 2.5. 歌詞の入力
NEUTRINO用の歌詞データを作成することができます。
歌詞データは、音列データに対応しています。
-「k」から始まる行に入力します
- 対応する歌詞の**後**に入力します
- 一音節にまとめる場合は、「^」を入力します。
- 「ん」「ゃ」「ゅ」「ょ」「っ」が続いた場合は、一音として扱われます
　（音節を区切りたい場合は「,」を入力します）

(例)
```
n|1_2_3_4_ |3_2_1_. |3_4_5_6_|5_4_3_..|
k|かえるの |うたが　|きこえて|くるよ..|
```
プレビュー画面で音データとの対応を確認することができます。

### 2.6 歌声合成を行う
VOICEVOXと連携し、出力することができます。

### 2.7 歌詞付きデータファイルを出力する
歌詞付きデータファイルMusicXMLを出力することができます。

### 2.6 自動作曲の利用
キーワードを用いて、作曲することができます。
ほぼおまかせにすることや、ある程度指定して、作曲することができます。

以下の用語でジャンルを指定可能です。
インストゥルメンタル、
「instrumental」「」

## 3. 外部からの利用
### APIについて

