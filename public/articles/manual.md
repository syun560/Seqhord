# SMML Editorユーザマニュアル
## 本アプリの特徴

<iframe width="560" height="315" src="https://www.youtube.com/embed/Uhj9IiNYFsk?si=cztyFTFL1FCMFYBk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

本アプリは左側のテキストエディタの記述を解釈（コンパイル）し、音楽を生成します。  
音列データの記述には、SMMLという特殊な記法を用います。

SMMLは、MML（Music Macro Language）で使用されていたABC記法を簡略化した記法を用います。
MIDIの形式を踏襲し、音データではなく、楽譜データを保存します。

### 1.1. 画面を見てみる
![erogazou](/images/ss.png)
デフォルトで、5つのトラックが用意されており、それぞれのタブに対応しています。
特に「main」タブは、コンダクタートラックという特別なトラックで、
ここに楽曲全体の構造を記述していきます。

## 2. SMEを使いこなす
ここまでの機能は、基本的な音楽シーケンサと代わりありません。

コードやスケールといった、音楽理論の概念や、
変数や関数といったプログラミングの概念を導入することで、
よりパワフルな作曲体験を得ることができます。

### 2.1 変数について
繰り返しの変数を用いることができます。
よく使われるパターンを変数として定義することで、繰り返しの記述を省略し、より簡潔に記述することができます。
現在使用している変数は、画面右側に表示されます。

コード弾きのストロークです。

#### 変数の定義
変数は以下のように定義することができます。

#### 変数の使用
変数は以下のように使用することができます。



### 2.2 関数の設定
関数を使用することで、音列に対して操作を行うことができます。
「一オクターブ変更」したり、
スケール内で自由に弾くなどを行うことができます。

デフォルトで用意されている関数は以下の通りです。
| 関数名    | 使用法                         | 説明 |
| --------- | ------------------------------ | ---- |
| rand      | スケール内のランダムな音を出す |      |
| transpose | オクターブ変更する             |      |
|           |                                |      |

### 2.3 コードの指定
コードトラックでは、和音コードを指定ことができます（アノテーション）。
コードを指定することで、伴奏の自動入力などの、機能を利用することができます。

移動ドと考え、相対的な音を入力することができます。

コードは、以下のように記述します。成り立ちます。
C#-----------------------m7-5-----------/分数コード
根音（ルート音）

以下の12音から指定します。
「C, D, E, F, G, A, B」

ルート音に続けて、以下の種類のコードを指定することができます。
構成音はルート音を0としたときの相対表記（半音いくつ分離れているか）です。

| コード | 説明                     | 構成音       |     |
| ------ | ------------------------ | ------------ | --- |
|        | メジャー                 | [0,3,5]      |     |
| m      | マイナー                 | [0,3,5]      |     |
| 7      | セブンス                 | [0, 3, 5, 7] |     |
| M7     | メジャーセブンス         | [0,3,5]      |     |
| Mm7    | メジャーマイナーセブンス |              |     |
| m7     | マイナーセブンス         |              |     |
| dim    | ディミニッシュ           |              |     |
| dim7   | ディミニッシュセブンス   |              |     |
| sus4   | サスフォー               |              |     |
| add9   | アドナインス             |              |     |
| aug    | オーギュメント           |              |     |

「/」を使用することで、分数コードを指定できます。
分数コードを指定することで、最低音が指定した音となります。


### 2.4. トラックの追加
MIDIの仕様に習い、**最大16トラック**までとしています。
トラックは4種類あり、それぞれ用途が分かれています。
追加トラックは「@type」キーワードで、以下の指定が可能です。

| トラックの種類 | 説明             |
| -------------- | ---------------- |
| melody         | メイン           |
| chord          | コードトラック   |
| bass           | ベーストラック   |
| drum           | パーカッション   |


### 2.5. 歌詞の入力
NEUTRINO用の歌詞データを作成することができます。
歌詞データは、音列データに対応しています。

- 「k」から始まる行に入力します
- 対応する歌詞の**後**に入力します
- 一音節にまとめる場合は、「^」を入力します。
- 「ん」「ゃ」「ゅ」「ょ」「っ」が続いた場合は、一音として扱われます
　（音節を区切りたい場合は「,」を入力します）

(例)

```
n|1_2_3_4_ |3_2_1_. |3_4_5_6_|5_4_3_..|
k|かえるの |うたが　|きこえて|くるよ..|
```

プレビュー画面で音データとの対応を確認することができます。

### 2.6 歌声合成を行う
VOICEVOXと連携し、出力することができます。

### 2.7 歌詞付きデータファイルを出力する
歌詞付きデータファイルMusicXMLを出力することができます。

### 2.6 自動作曲の利用
キーワードを用いて、作曲することができます。
ほぼおまかせにすることや、ある程度指定して、作曲することができます。

以下の用語でジャンルを指定可能です。
インストゥルメンタル、
「instrumental」「」

## 3. 外部からの利用
### APIについて

